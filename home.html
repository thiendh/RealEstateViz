<!DOCTYPE html>
<html>

<head>
  <script data-require="d3@3.5.3" data-semver="3.5.3" src="//cdnjs.cloudflare.com/ajax/libs/d3/3.5.3/d3.js"></script>
  <style>
    body {
      font: 10px sans-serif;
    }

    .axis path,
    .axis line {
      fill: none;
      stroke: #000;
      shape-rendering: crispEdges;
    }

    .x.axis path {
      display: none;
    }

    .line {
      fill: none;
      stroke: steelblue;
      stroke-width: 1.5px;
    }
  </style>
</head>

<body>
  <script>
    var myData = "date	New York	San Francisco	Austin\n\
    20010822	299000	285000\n\
    20021115	285000	285000\n\
    20100818	329900	285000\n\
    20000628	319000	299000\n\
    20020130	295000	300000\n\
    20020110	319000	319000\n\
    20110121	339900	320000\n\
    20021220	324000	324000\n\
    20030715	325000	325000\n\
    20110429	325000	325000\n\
    20011215	329000	329000\n\
    20010822	345000	330000\n\
    20011203	339000	339000\n\
    20100930	340000	340000\n\
    20010717	355000	342500\n\
    20010803	359000	345000\n\
    20011129	359000	345000\n\
    20011227	354000	348000\n\
    20010927	349000	349500\n\
    20000317	329000	350000\n\
    20010531	369000	350000\n\
    20010618	369000	350000\n\
    20010726	365000	350000\n\
    20011009	359000	350000\n\
    20140129	367594	350000\n\
    20010831	349000	354000\n\
    20000609	340000	355000\n\
    20010808	365000	355000\n\
    20040227	345000	355000\n\
    20000628	299000	360000\n\
    20030214	369000	360000\n\
    20030919	359000	363000\n\
    20010707	369000	365000\n\
    20011109	365000	365000\n\
    20020614	359000	366000\n\
    20030107	369000	366000\n\
    20020514	369000	369000\n\
    20001130	369950	370000\n\
    20010802	375000	370000\n\
    20030425	329000	370000\n\
    20011130	390000	372500\n\
    20010523	399000	375000\n\
    20010913	379000	375000\n\
    20011019	375000	375000\n\
    20010615	385000	377000\n\
    20010517	379000	379000\n\
    20010726	435000	380000\n\
    20010803	425000	380000\n\
    20101220	389900	380000\n\
    20010619	399000	385000\n\
    20010815	385000	385000\n\
    20020812	399000	385000\n\
    20030109	369000	385000\n\
    20030501	385000	385000\n\
    20111005	399000	386000\n\
    20010622	389000	389000\n\
    20010815	389000	389000\n\
    20020110	389000	389000\n\
    20020517	389000	389000\n\
    20020828	389000	389000\n\
    20040227	389000	389000\n\
    20040430	389000	389000\n\
    20101028	389900	389900\n\
    20120427	400000	390000\n\
    20010712	399000	391500\n\
    20010628	409000	392000\n\
    20010831	398000	392000\n\
    20030529	389000	392000\n\
    20011222	395000	395000\n\
    20020202	395000	395000\n\
    20030221	409000	400000\n\
    20030327	395000	400000\n\
    20040611	360000	400000\n\
    20090619	458713	400000\n\
    20010530	419000	401000\n\
    20040611	349000	401500\n\
    20020226	415000	403000\n\
    20010620	419000	403500\n\
    20010313	389000	405000\n\
    20020226	475000	405000\n\
    20030711	399000	405000\n\
    20031104	409000	405000\n\
    20100908	418900	405000\n\
    20030327	400000	406000\n\
    20030318	419000	408000\n\
    20010515	449000	409000\n\
    20030317	399000	409000\n\
    20030926	409000	409000\n\
    20030926	425000	409000\n\
    20031231	409000	409000\n\
    20000310	425000	410000\n\
    20000531	369000	410000\n\
    20020201	415000	410000\n\
    20020322	410000	410000\n\
    20020701	399000	410000\n\
    20101022	399000	412000\n\
    20030425	419000	415000\n\
    20030919	419000	415000\n\
    20031224	415000	415000\n\
    20040116	399000	415000\n\
    20111205	399000	415000\n\
    20030403	439000	418000\n\
    20031126	419500	418000\n\
    20020301	415000	419000\n\
    20020312	419000	419000\n\
    20030406	419000	419000\n\
    20030919	419000	419000\n\
    20040213	419000	419000\n\
    20040220	419000	419000\n\
    20030116	419000	420000\n\
    20030328	419000	420000\n\
    20030715	429000	420000\n\
    20040312	425000	420000\n\
    20110325	358000	420000\n\
    20041130	405000	422000\n\
    20030411	429000	423000\n\
    20030509	429000	424000\n\
    20030513	429000	424000\n\
    20010829	429000	425000\n\
    20021105	425000	425000\n\
    20030205	435000	425000\n\
    20030627	429000	425000\n\
    20031202	399000	425000\n\
    20040123	425000	425000\n\
    20120312	425000	425000\n\
    20030723	419000	427000\n\
    20030829	439000	427000\n\
    20000310	429000	429000\n\
    20021231	439000	429000\n\
    20030310	429000	429000\n\
    20031006	429000	429000\n\
    20040220	429000	429000\n\
    20040416	409000	429000\n\
    20110520	450000	430000\n\
    20121231	399000	433000\n\
    20030402	444000	434000\n\
    20030418	429000	434000\n\
    20020618	419000	435000\n\
    20020702	435000	435000\n\
    20030211	425000	435000\n\
    20030325	510000	435000\n\
    20030410	459000	435000\n\
    20031003	435000	435000\n\
    20031120	442000	438000\n\
    20000218	439000	439000\n\
    20020717	439000	439000\n\
    20031202	439000	439000\n\
    20040129	439000	439000\n\
    20040206	439000	439000\n\
    20040316	439000	439000\n\
    20000324	439200	439200\n\
    20010305	419000	440000\n\
    20010914	449000	440000\n\
    20030721	445000	440000\n\
    20110202	440000	440000\n\
    20111007	446000	440000\n\
    20021018	449000	441000\n\
    20021101	429000	441000\n\
    20030411	449000	443000\n\
    20020501	445000	444000\n\
    20020501	445000	445000\n\
    20030403	439000	445000\n\
    20040109	439000	445000\n\
    20040202	445000	445000\n\
    20040226	439000	445000\n\
    20120523	450000	445000\n\
    20020524	435000	446000\n\
    20021009	445000	447000\n\
    20030620	399000	448000\n\
    20000725	449000	449000\n\
    20010309	449000	449000\n\
    20030416	449000	449000\n\
    20040130	449000	449000\n\
    20040210	449000	449000\n\
    20091211	469000	449000\n\
    20000423	419000	450000\n\
    20010809	459000	450000\n\
    20030710	459000	450000\n\
    20030918	439000	450000\n\
    20031002	449000	450000\n\
    20031003	455000	450000\n\
    20040507	399000	450000\n\
    20000310	469000	455000\n\
    20010222	449000	455000\n\
    20020423	419000	455000\n\
    20010928	479000	455050\n\
    20090521	429000	458000\n\
    20120330	459000	458000\n\
    20010930	459000	459000\n\
    20040212	459000	459000\n\
    20040227	459000	459000\n\
    20040326	459000	459000\n\
    20110228	469000	459000\n\
    20030724	429000	460000\n\
    20040217	435000	460000\n\
    20040316	460000	460000\n\
    20091230	464900	460000\n\
    20120127	489000	460000\n\
    20120316	449000	460000\n\
    20020329	485000	462500\n\
    20030528	445000	464000\n\
    20011120	465000	465000\n\
    20090921	475000	465000\n\
    20091008	475000	465000\n\
    20091015	475000	465000\n\
    20100318	469000	466000\n\
    20000217	419000	467000\n\
    20000314	469000	469000\n\
    20010416	469000	469000\n\
    20020523	459000	469000\n\
    20021220	469000	469000\n\
    20031002	469000	469000\n\
    20040213	469000	469000\n\
    20040224	469000	469000\n\
    20040316	469000	469000\n\
    20040901	459000	469000\n\
    20120813	469000	469000\n\
    20020624	459000	470000\n\
    20110719	469000	470000\n\
    20020819	455000	472000\n\
    20040824	473000	473000\n\
    20000707	459000	475000\n\
    20020530	469000	475000\n\
    20020617	469000	475000\n\
    20020825	489000	475000\n\
    20030401	499000	475000\n\
    20030926	469000	475000\n\
    20040503	465000	475000\n\
    20040625	439000	475000\n\
    20090311	474900	475000\n\
    20090626	499000	475000\n\
    20101118	479000	475000\n\
    20110708	525000	475000\n\
    20111220	423000	475500\n\
    20040709	449000	476000\n\
    20121102	399000	477000\n\
    20000628	479000	479000\n\
    20010521	479000	479000\n\
    20020423	459000	479000\n\
    20040206	479000	479000\n\
    20040211	479000	479000\n\
    20040224	429000	479000\n\
    20040227	479000	479000\n\
    20040325	489000	479000\n\
    20040930	479000	479000\n\
    20041001	479000	479000\n\
    20120531	465000	479000\n\
    20040430	479000	479200\n\
    20000825	470000	480000\n\
    20010309	495000	480000\n\
    20040113	479000	480000\n\
    20040908	489000	480000\n\
    20090529	499900	480000\n\
    20111011	499000	480000\n\
    20110722	496900	480300\n\
    20011024	479000	481540\n\
    20000818	449000	482500\n\
    20100617	499000	483500\n\
    20010301	485000	485000\n\
    20020423	449000	485000\n\
    20030702	489000	485000\n\
    20030929	475000	485000\n\
    20040113	499000	485000\n\
    20090929	499000	485000\n\
    20121129	498750	485000\n\
    20120306	487350	487500\n\
    20020410	489000	489000\n\
    20021024	489000	489000\n\
    20030926	489000	489000\n\
    20031119	489000	489000\n\
    20040113	489000	489000\n\
    20040206	489000	489000\n\
    20040212	489000	489000\n\
    20040702	459000	489000\n\
    20110127	499000	489000\n\
    20000911	419000	490000\n\
    20010406	499000	490000\n\
    20040611	399000	490000\n\
    20040818	469000	490000\n\
    20080328	490000	490000\n\
    20080515	469900	490000\n\
    20101217	499000	490000\n\
    20000314	469000	491000\n\
    20040328	469000	492000\n\
    20000327	469000	493000\n\
    20120409	519000	493712\n\
    20010413	495000	495000\n\
    20011130	495000	495000\n\
    20031007	515000	495000\n\
    20040813	499000	495000\n\
    20110307	495000	495000\n\
    20120906	499000	495000\n\
    20080709	469000	496000\n\
    20090406	497900	496000\n\
    20031024	485000	497000\n\
    20110207	525000	497000\n\
    20000425	489000	497500\n\
    20000301	479000	499000\n\
    20001208	499000	499000\n\
    20010222	499000	499000\n\
    20010301	499000	499000\n\
    20030117	499000	499000\n\
    20040113	499000	499000\n\
    20040205	499000	499000\n\
    20040213	499000	499000\n\
    20040430	499000	499000\n\
    20040917	499000	499000\n\
    20110426	499000	499000\n\
    20110805	499000	499000\n\
    20120725	499000	499000\n\
    20010126	499000	500000\n\
    20040330	499500	500000\n\
    20040423	439000	500000\n\
    20040428	485000	500000\n\
    20040618	449000	500000\n\
    20051121	495000	500000\n\
    20060117	499000	500000\n\
    20061025	510000	500000\n\
    20100520	500000	500000\n\
    20120119	499000	500000\n\
    20030203	499000	501000\n\
    20060322	498000	502000\n\
    20110729	503000	503000\n\
    20030725	519000	503400\n\
    20000306	499000	504000\n\
    20031118	489000	505000\n\
    20040521	449000	505000\n\
    20040722	479000	505000\n\
    20120413	500000	505604\n\
    20040130	509000	509000\n\
    20040528	509000	509000\n\
    20020530	469000	510000\n\
    20040708	479000	510000\n\
    20040824	474000	510000\n\
    20061220	519000	510000\n\
    20080304	499000	510000\n\
    20100712	525000	510000\n\
    20100806	514000	510000\n\
    20120716	449000	510000\n\
    20010622	509000	511000\n\
    20090529	512027	512027\n\
    20010104	519000	515000\n\
    20031211	515000	515000\n\
    20040430	499000	515000\n\
    20040430	499000	515000\n\
    20040715	459000	515000\n\
    20041119	449000	515000\n\
    20050923	515000	515000\n\
    20100311	509000	515000\n\
    20100415	539900	515000\n\
    20120327	499000	515000\n\
    20121031	515000	515000\n\
    20121213	530300	515000\n\
    20100813	499000	515950\n\
    20040525	519000	519000\n\
    20040930	519000	519000\n\
    20050107	519000	519000\n\
    20090915	539000	519000\n\
    20120217	538000	519000\n\
    20120308	520000	519000\n\
    20010105	505000	520000\n\
    20010301	515000	520000\n\
    20040206	520000	520000\n\
    20040901	459000	520000\n\
    20050218	479000	520000\n\
    20090529	499000	520000\n\
    20100423	545000	520000\n\
    20100909	549000	520000\n\
    20121114	498500	520000\n\
    20090909	529000	524000\n\
    20120820	475000	524000\n\
    20000616	479000	525000\n\
    20001208	525000	525000\n\
    20001229	525000	525000\n\
    20011116	535000	525000\n\
    20040430	509000	525000\n\
    20040604	489000	525000\n\
    20040910	525000	525000\n\
    20041123	525000	525000\n\
    20100803	525000	525000\n\
    20000825	459000	527000\n\
    20001213	529000	529000\n\
    20030501	538000	529000\n\
    20030602	529000	529000\n\
    20040227	519000	529000\n\
    20040322	529000	529000\n\
    20040528	529000	529000\n\
    20040528	529000	529000\n\
    20090901	529000	529000\n\
    20100608	529000	529000\n\
    20120509	529000	529000\n\
    20020724	525000	530000\n\
    20020830	539000	530000\n\
    20030505	529000	530000\n\
    20030926	519000	530000\n\
    20040402	499000	530000\n\
    20040513	485000	530000\n\
    20040819	519000	530000\n\
    20041221	529000	530000\n\
    20050614	529000	530000\n\
    20090508	559000	530000\n\
    20100812	549000	530000\n\
    20120425	470000	530000\n\
    20040322	534000	534000\n\
    20120523	529000	534000\n\
    20000331	509000	535000\n\
    20001012	565000	535000\n\
    20040211	560000	535000\n\
    20041028	499000	535000\n\
    20041029	539000	535000\n\
    20041117	535000	535000\n\
    20041210	535000	535000\n\
    20060420	529000	535000\n\
    20060524	559000	535000\n\
    20090807	549000	535000\n\
    20100402	539000	535000\n\
    20100423	545000	535000\n\
    20100923	549000	535000\n\
    20111202	499000	535000\n\
    20120510	539000	535000\n\
    20041022	499000	536000\n\
    20120420	549000	537000\n\
    20030502	549000	537500\n\
    20030801	549000	539000\n\
    20031010	539000	539000\n\
    20040525	539000	539000\n\
    20040528	539000	539000\n\
    20040715	549000	539000\n\
    20040427	495000	540000\n\
    20050929	499000	540000\n\
    20100827	549000	540000\n\
    20040413	489000	541000\n\
    20040723	539000	542500\n\
    20030926	509000	543000\n\
    20040729	539000	545000\n\
    20070907	549000	545000\n\
    20110803	560000	545000\n\
    20111216	569000	545000\n\
    20120313	539000	545000\n\
    20040715	499000	548000\n\
    20080828	579899	548000\n\
    20041103	549000	549000\n\
    20041209	549000	549000\n\
    20100331	549900	549000\n\
    20100511	559000	549000\n\
    20040507	489000	550000\n\
    20040816	489000	550000\n\
    20040820	539000	550000\n\
    20040917	539000	550000\n\
    20041118	539000	550000\n\
    20050610	479000	550000\n\
    20100324	569000	550000\n\
    20121026	510000	550000\n\
    20040618	499000	551000\n\
    20040416	459000	552000\n\
    20090630	549900	552000\n\
    20000218	499000	555000\n\
    20011024	589000	555000\n\
    20041214	499000	555000\n\
    20060926	559000	555000\n\
    20070426	559000	555000\n\
    20120529	475000	555000\n\
    20120831	559000	555000\n\
    20121003	558000	555000\n\
    20121004	519000	555000\n\
    20040319	559000	559000\n\
    20040520	559000	559000\n\
    20040527	559000	559000\n\
    20040713	459000	559000\n\
    20041102	559000	559000\n\
    20061017	559000	559000\n\
    20081223	559000	559000\n\
    20010126	519000	560000\n\
    20030612	560000	560000\n\
    20040930	529000	560000\n\
    20041117	569000	560000\n\
    20050617	560000	560000\n\
    20050811	479000	560000\n\
    20081117	599000	560000\n\
    20110414	559000	560000\n\
    20120425	529000	560000\n\
    20120919	539000	560000\n\
    20121206	569000	560000\n\
    20130731	499000	560000\n\
    20041130	499000	561500\n\
    20060421	529000	561500\n\
    20040422	549000	565000\n\
    20040625	549000	565000\n\
    20040928	559000	565000\n\
    20041001	579000	565000\n\
    20041130	549000	565000\n\
    20061006	569000	565000\n\
    20091230	520000	565000\n\
    20120720	564000	565000\n\
    20120824	569000	565000\n\
    20121108	565000	565000\n\
    20080703	588000	568000\n\
    20000915	569000	569000\n\
    20010923	569000	569000\n\
    20090331	599000	569000\n\
    20120306	579000	569000\n\
    20040617	569500	569500\n\
    20000223	535000	570000\n\
    20040608	499000	570000\n\
    20040813	499000	570000\n\
    20051110	589000	570000\n\
    20051123	539000	570000\n\
    20060317	569000	570000\n\
    20091207	590000	570000\n\
    20130208	495000	571000\n\
    20040928	559000	572000\n\
    20041124	498000	572500\n\
    20040429	539000	575000\n\
    20040608	465000	575000\n\
    20040928	539000	575000\n\
    20041124	569000	575000\n\
    20051013	525000	575000\n\
    20051202	575000	575000\n\
    20060608	579000	575000\n\
    20060627	579000	575000\n\
    20070117	589000	575000\n\
    20090811	609000	575000\n\
    20101029	615000	575000\n\
    20110427	599000	575000\n\
    20110527	575000	575000\n\
    20111104	575000	575000\n\
    20161128	574999	575000\n\
    20040812	539000	576000\n\
    20110121	579000	576800\n\
    20040721	535000	578000\n\
    20060714	569000	578000\n\
    20091204	579000	579000\n\
    20040317	575000	580000\n\
    20040804	529000	580000\n\
    20070104	540000	580000\n\
    20070814	539000	580000\n\
    20080215	575000	580000\n\
    20110706	588000	580000\n\
    20120319	595000	580000\n\
    20040311	589000	582000\n\
    20120727	599000	582500\n\
    20120824	569000	583000\n\
    20040401	589000	585000\n\
    20050104	549000	585000\n\
    20050217	549000	585000\n\
    20051030	579000	585000\n\
    20060317	569000	585000\n\
    20050527	529000	586000\n\
    20051122	575000	588000\n\
    20000831	589000	589000\n\
    20040521	589000	589000\n\
    20040526	589000	589000\n\
    20040528	589000	589000\n\
    20040528	589000	589000\n\
    20040602	589000	589000\n\
    20041004	589000	589000\n\
    20060428	579000	589000\n\
    20061201	589000	589000\n\
    20070928	599000	589000\n\
    20081031	599000	589000\n\
    20111123	599000	589000\n\
    20010222	599000	590000\n\
    20040630	529000	590000\n\
    20040722	579000	590000\n\
    20060228	599000	590000\n\
    20070402	575000	590000\n\
    20040716	599000	591850\n\
    20080924	588000	592000\n\
    20040602	589000	592500\n\
    20040514	594000	594000\n\
    20061220	599000	594000\n\
    20071003	599000	594000\n\
    20051215	595000	595000\n\
    20060526	595000	595000\n\
    20070309	599000	595000\n\
    20041008	499000	596000\n\
    20040514	589000	596500\n\
    20080822	599900	597000\n\
    20040316	599000	599000\n\
    20060310	599000	599000\n\
    20061031	599000	599000\n\
    20071214	599000	599000\n\
    20081029	599000	599000\n\
    20090730	599000	599000\n\
    20100709	599000	599000\n\
    20110928	599000	599000\n\
    20130131	599000	599000\n\
    20140909	599000	599000\n\
    20040323	600000	600000\n\
    20040521	549000	600000\n\
    20050623	525000	600000\n\
    20050812	599999	600000\n\
    20051028	549000	600000\n\
    20060223	610000	600000\n\
    20061205	569000	600000\n\
    20070726	598000	600000\n\
    20090819	600000	600000\n\
    20100406	599000	600000\n\
    20130426	575000	600000\n\
    20050429	549000	601000\n\
    20040702	549000	601500\n\
    20030619	603900	603900\n\
    20030909	629000	605000\n\
    20050503	519000	605000\n\
    20060828	605000	605000\n\
    20060911	599000	605000\n\
    20061129	609000	605000\n\
    20080715	629000	605000\n\
    20080829	619000	605000\n\
    20090424	655000	605000\n\
    20130730	599000	605000\n\
    20101221	629000	608200\n\
    20060203	599000	608500\n\
    20041022	545000	609000\n\
    20071228	609000	609000\n\
    20000216	550000	610000\n\
    20040618	549000	610000\n\
    20060608	595000	610000\n\
    20060925	599000	610000\n\
    20111109	589000	610000\n\
    20160829	599900	610000\n\
    20050819	529000	611000\n\
    20130419	599000	612500\n\
    20031104	629000	615000\n\
    20080226	649000	615000\n\
    20080709	650000	615000\n\
    20090303	629000	615000\n\
    20110517	615000	615000\n\
    20121211	615000	615000\n\
    20170331	615000	618000\n\
    20040202	619000	619000\n\
    20040319	619000	619000\n\
    20050518	499000	620000\n\
    20050928	599000	620000\n\
    20060608	619000	620000\n\
    20130718	579000	620000\n\
    20121002	599000	620500\n\
    20070209	623000	623000\n\
    20040517	595000	625000\n\
    20040521	569000	625000\n\
    20050211	589000	625000\n\
    20050502	619000	625000\n\
    20050510	529000	625000\n\
    20060315	619000	625000\n\
    20060629	625000	625000\n\
    20060713	625000	625000\n\
    20060908	619000	625000\n\
    20070315	629000	625000\n\
    20090804	599000	625000\n\
    20120319	625000	625000\n\
    20131107	599000	626000\n\
    20050325	549000	628000\n\
    20080625	679000	628000\n\
    20140425	599000	628000\n\
    20000505	629000	629000\n\
    20060727	599000	629000\n\
    20070425	629000	629000\n\
    20040701	615000	630000\n\
    20060331	619000	630000\n\
    20070816	639000	630000\n\
    20070823	599900	630000\n\
    20080207	629000	630000\n\
    20080328	649000	630000\n\
    20080523	649000	630000\n\
    20150710	640000	630000\n\
    20010413	659000	635000\n\
    20050228	635000	635000\n\
    20050421	575000	635000\n\
    20051115	639000	635000\n\
    20060309	635000	635000\n\
    20060627	575000	635000\n\
    20070413	635000	635000\n\
    20090629	629000	635000\n\
    20120717	649000	635000\n\
    20130503	599000	635000\n\
    20130930	585000	635000\n\
    20120424	599000	636000\n\
    20110708	689000	637500\n\
    20060301	629000	638000\n\
    20040525	639000	639000\n\
    20040603	639000	639000\n\
    20050119	639000	639000\n\
    20060621	639000	639000\n\
    20070112	639000	639000\n\
    20070209	639000	639000\n\
    20070307	629000	639000\n\
    20070627	639000	639000\n\
    20071206	669000	639000\n\
    20071228	639000	639000\n\
    20100415	639000	639000\n\
    20110415	639000	639000\n\
    20001017	500000	640000\n\
    20050222	599000	640000\n\
    20050609	619000	640000\n\
    20050930	599000	640000\n\
    20060712	619000	640000\n\
    20060728	625000	640000\n\
    20071016	640000	640000\n\
    20120428	650000	640000\n\
    20121130	579000	640000\n\
    20050506	569000	641000\n\
    20060331	649000	641250\n\
    20051118	599000	642000\n\
    20070725	648000	642000\n\
    20070503	650000	642500\n\
    20000602	645000	645000\n\
    20050513	599000	645000\n\
    20060831	644000	645000\n\
    20050818	595000	645500\n\
    20070725	649000	646000\n\
    20070726	649000	646000\n\
    20000505	649000	649000\n\
    20040326	649000	649000\n\
    20050302	579000	649000\n\
    20050823	649000	649000\n\
    20060111	649000	649000\n\
    20060609	649000	649000\n\
    20130731	649000	649000\n\
    20140909	649000	649000\n\
    20050329	579000	650000\n\
    20050426	599000	650000\n\
    20050429	559000	650000\n\
    20050510	559000	650000\n\
    20060222	650000	650000\n\
    20060421	665000	650000\n\
    20070803	629000	650000\n\
    20070809	635000	650000\n\
    20070815	626000	650000\n\
    20090612	699000	650000\n\
    20120612	589000	650000\n\
    20121231	650000	650000\n\
    20130806	599000	650000\n\
    20131016	595000	650000\n\
    20151212	599000	650000\n\
    20050610	579000	651000\n\
    20060308	649000	651000\n\
    20061017	619000	651000\n\
    20070629	629000	652000\n\
    20060215	579000	653000\n\
    20060223	649000	655000\n\
    20060630	659000	655000\n\
    20070726	668000	655000\n\
    20150814	655000	655000\n\
    20061215	657000	657000\n\
    20040304	659000	659000\n\
    20070913	649000	659000\n\
    20040726	649000	660000\n\
    20050420	589000	660000\n\
    20050713	549000	660000\n\
    20050810	579000	660000\n\
    20060224	659000	660000\n\
    20060314	664000	660000\n\
    20070722	665000	660000\n\
    20070801	649000	660000\n\
    20100623	678000	660000\n\
    20130906	599000	660000\n\
    20050819	599000	661000\n\
    20150811	661500	661500\n\
    20140826	599000	662000\n\
    20050707	579000	662500\n\
    20051103	649000	663000\n\
    20110809	679000	664000\n\
    20050701	599000	665000\n\
    20060414	659000	665000\n\
    20060620	659000	665000\n\
    20100721	665000	665000\n\
    20100903	699000	665000\n\
    20111130	665000	665000\n\
    20120501	689000	667000\n\
    20040525	669000	669000\n\
    20040528	669000	669000\n\
    20040601	669000	669000\n\
    20041103	669000	669000\n\
    20080408	669000	669000\n\
    20080605	679000	669000\n\
    20131011	669000	669000\n\
    20050207	579000	670000\n\
    20050622	519000	670000\n\
    20080912	679000	670000\n\
    20090306	695000	670000\n\
    20101112	689000	670000\n\
    20120620	670000	670000\n\
    20170818	588000	670000\n\
    20040812	569000	671000\n\
    20130228	599000	672250\n\
    20050228	675000	675000\n\
    20050824	599000	675000\n\
    20050901	649000	675000\n\
    20051229	659000	675000\n\
    20060321	649000	675000\n\
    20060512	675000	675000\n\
    20070330	658000	675000\n\
    20071012	699000	675000\n\
    20130327	599000	675000\n\
    20130531	599000	675000\n\
    20130930	649000	675000\n\
    20170310	625000	675000\n\
    20061109	689000	677000\n\
    20130426	639000	677500\n\
    20040528	639000	678000\n\
    20060929	678000	678000\n\
    20131113	599000	678000\n\
    20061122	649000	679000\n\
    20070308	679000	679000\n\
    20070502	679000	679000\n\
    20131220	630000	679000\n\
    20050830	659000	680000\n\
    20100521	699000	680000\n\
    20130604	579000	680000\n\
    20130819	599000	680000\n\
    20051026	625000	681000\n\
    20140502	682000	682000\n\
    20051215	629000	685000\n\
    20071126	699000	685000\n\
    20121127	649000	685000\n\
    20041206	679000	687000\n\
    20130418	649000	688000\n\
    20040526	699000	689000\n\
    20040528	689000	689000\n\
    20040602	689000	689000\n\
    20050614	689000	689000\n\
    20100427	699000	689000\n\
    20050616	599000	690000\n\
    20050718	619000	690000\n\
    20051110	650000	690000\n\
    20051114	669000	690000\n\
    20130315	649000	690000\n\
    20130516	699000	690000\n\
    20050331	695000	695000\n\
    20071128	695000	695000\n\
    20130625	649000	695000\n\
    20131011	629000	695000\n\
    20131221	699000	695000\n\
    20140228	659000	695000\n\
    20131113	699000	697500\n\
    20040528	699000	699000\n\
    20040602	699000	699000\n\
    20060728	699000	699000\n\
    20060814	669000	699000\n\
    20071018	699000	699000\n\
    20080613	699000	699000\n\
    20120725	699000	699000\n\
    20050323	589000	700000\n\
    20050902	695000	700000\n\
    20080730	725000	700000\n\
    20130515	639000	700000\n\
    20130723	635000	700000\n\
    20130924	659000	700000\n\
    20140124	649000	700000\n\
    20140617	649000	700000\n\
    20150521	599000	700000\n\
    20180716	739000	700000\n\
    20050922	649000	701000\n\
    20130919	599000	701000\n\
    20070228	685000	703000\n\
    20070308	703390	703390\n\
    20050729	699000	705000\n\
    20050930	649000	705000\n\
    20100413	679000	705000\n\
    20120612	595000	705000\n\
    20130919	599000	705000\n\
    20140429	599000	705000\n\
    20170616	625000	705000\n\
    20141017	599000	708000\n\
    20000630	699000	710000\n\
    20040209	710000	710000\n\
    20041123	699000	710000\n\
    20060203	699000	710000\n\
    20101229	695000	710000\n\
    20130719	599000	710000\n\
    20130925	649000	710000\n\
    20140613	699000	710000\n\
    20060322	699000	711000\n\
    20070309	713072	713072\n\
    20050812	599000	715000\n\
    20061019	729000	715000\n\
    20120626	629000	715000\n\
    20130926	649000	715000\n\
    20131122	729000	715000\n\
    20061018	729000	718000\n\
    20040527	719000	719000\n\
    20061101	739000	719000\n\
    20000727	699000	720000\n\
    20060224	729000	720000\n\
    20060428	715000	720000\n\
    20070817	759000	720000\n\
    20130502	649000	720000\n\
    20130830	699000	720000\n\
    20140922	698000	720000\n\
    20130503	649000	722000\n\
    20040430	725000	725000\n\
    20050218	725000	725000\n\
    20120507	699000	725000\n\
    20121219	725000	725000\n\
    20130621	649000	725000\n\
    20130815	689000	725000\n\
    20140808	725000	725000\n\
    20160902	675000	725000\n\
    20000303	689000	730000\n\
    20050719	649000	730000\n\
    20050819	699000	730000\n\
    20070706	749000	730000\n\
    20140512	665000	730000\n\
    20161107	699000	730000\n\
    20150817	733500	733500\n\
    20050407	599000	735000\n\
    20140725	729000	735000\n\
    20130924	649000	736500\n\
    20010320	739000	739000\n\
    20040609	739000	739000\n\
    20140219	699000	740000\n\
    20140919	699000	740000\n\
    20150317	699000	741500\n\
    20131209	679000	742000\n\
    20130412	699000	743000\n\
    20070309	749000	745000\n\
    20140829	699000	745000\n\
    20080124	749000	749000\n\
    20170328	749000	749000\n\
    20050317	675000	750000\n\
    20050425	689000	750000\n\
    20050610	738000	750000\n\
    20130517	675000	750000\n\
    20130726	659000	750000\n\
    20130904	655000	750000\n\
    20140221	679000	750000\n\
    20140326	649000	750000\n\
    20151203	699000	750000\n\
    20160601	695000	750000\n\
    20160610	750000	750000\n\
    20170221	749000	750000\n\
    20141103	699000	750888\n\
    20140611	695000	751000\n\
    20131001	733809	752000\n\
    20140711	699000	752000\n\
    20161212	829000	752000\n\
    20140310	699000	755000\n\
    20140502	640000	756000\n\
    20070627	775000	760000\n\
    20140716	649000	760000\n\
    20140814	759000	760000\n\
    20170214	799000	760000\n\
    20130611	699000	761000\n\
    20081205	785000	765000\n\
    20130220	699000	765000\n\
    20170831	699000	765000\n\
    20151223	769000	769000\n\
    20130625	749000	770000\n\
    20130911	699000	770000\n\
    20151123	770000	770000\n\
    20051209	749000	775000\n\
    20060427	749000	775000\n\
    20060607	765000	775000\n\
    20150508	695000	775000\n\
    20150710	699000	775000\n\
    20151105	750000	775000\n\
    20171114	688000	775000\n\
    20160815	749000	779000\n\
    20060406	749000	780000\n\
    20080808	819000	780000\n\
    20130726	749000	780000\n\
    20140627	699000	780000\n\
    20170621	799000	780000\n\
    20171012	790000	780000\n\
    20130820	725000	785000\n\
    20160502	735000	785000\n\
    20131105	699000	786500\n\
    20050920	779000	790000\n\
    20140829	695000	790000\n\
    20141218	799000	790000\n\
    20150428	729500	790000\n\
    20160115	749000	790000\n\
    20051118	799000	799000\n\
    20070119	799000	799000\n\
    20180216	799000	799000\n\
    20180406	799000	799000\n\
    20050408	669000	800000\n\
    20060404	749000	800000\n\
    20130731	699000	800000\n\
    20171009	799888	802888\n\
    20180105	849000	805000\n\
    20140307	749000	810000\n\
    20150529	789000	810000\n\
    20041130	825000	815000\n\
    20131010	729000	815000\n\
    20170719	799000	815000\n\
    20080729	849000	820000\n\
    20130619	699000	820000\n\
    20160308	799000	820000\n\
    20160613	799000	820000\n\
    20180209	829000	820000\n\
    20060503	825000	825000\n\
    20130829	749000	825000\n\
    20140512	749000	825000\n\
    20151109	779000	825000\n\
    20160914	759000	825000\n\
    20161026	879000	825000\n\
    20070525	795000	830000\n\
    20160602	749000	830000\n\
    20161007	799000	830000\n\
    20170208	789000	830000\n\
    20050608	849000	835000\n\
    20171025	779000	835000\n\
    20030701	879000	840000\n\
    20040325	859000	840000\n\
    20050609	825000	840000\n\
    20130416	849000	845250\n\
    20031211	995000	850000\n\
    20140224	799000	850000\n\
    20140516	749000	850000\n\
    20140828	835000	850000\n\
    20141230	849000	850000\n\
    20160527	850000	850000\n\
    20160620	798000	850000\n\
    20170303	899000	850000\n\
    20171016	799000	850000\n\
    20180507	798000	850000\n\
    20130405	699000	855000\n\
    20160310	799000	855000\n\
    20161214	885000	855000\n\
    20051230	899000	857500\n\
    20150701	799000	860000\n\
    20161202	889000	860000\n\
    20070504	880000	870000\n\
    20160729	778000	870000\n\
    20171006	895000	870000\n\
    20141021	745000	874700\n\
    20050711	899000	875000\n\
    20091102	895000	875000\n\
    20140530	849000	875000\n\
    20160224	875000	875000\n\
    20170303	899000	875000\n\
    20171205	825000	875000\n\
    20170504	879000	879000\n\
    20180716	779000	880000\n\
    20110728	929000	885000\n\
    20150724	779000	885000\n\
    20160711	879000	890000\n\
    20170815	875000	890000\n\
    20080320	899000	899000\n\
    20170908	899000	899000\n\
    20180601	899000	899000\n\
    20151120	829000	900000\n\
    20160727	895000	900000\n\
    20160825	875000	900000\n\
    20180420	849000	900000\n\
    20150312	849000	901000\n\
    20151120	869000	905000\n\
    20170425	899000	905000\n\
    20140711	925000	910000\n\
    20150916	825000	912000\n\
    20180524	829000	915000\n\
    20171204	949000	919000\n\
    20171222	899000	920000\n\
    20180202	895000	920000\n\
    20141016	849000	925000\n\
    20150130	759000	925000\n\
    20171218	849000	928000\n\
    20141017	789000	930000\n\
    20061214	932982	932982\n\
    20151014	829000	935000\n\
    20180508	749000	935000\n\
    20180612	899000	935000\n\
    20150724	879000	938000\n\
    20150619	899000	950000\n\
    20150623	895000	950000\n\
    20160422	929000	950000\n\
    20160512	850000	950000\n\
    20161014	899000	950000\n\
    20180522	995000	950000\n\
    20050901	925000	955000\n\
    20180206	899000	955000\n\
    20160325	899000	958000\n\
    20150430	849000	960000\n\
    20150729	899000	960000\n\
    20151218	949000	969000\n\
    20171229	949000	970000\n\
    20151006	849000	975000\n\
    20160107	889000	975000\n\
    20151007	995000	978000\n\
    20180123	1025000	982500\n\
    20150326	835000	985000\n\
    20160505	879000	985000\n\
    20170224	988000	988000\n\
    20170510	989000	990000\n\
    20161104	989000	1000000\n\
    20170627	988000	1000000\n\
    20180629	940000	1000000\n\
    20140701	1100000	1013000\n\
    20170331	1049000	1020000\n\
    20180611	949000	1021000\n\
    20160329	1040000	1040000\n\
    20140226	849000	1050000\n\
    20050506	899000	1070000\n\
    20171122	1095000	1095000\n\
    20061206	1100000	1100000\n\
    20160328	950000	1100000\n\
    20180531	929000	1100000\n\
    20180719	998000	1100000\n\
    20180507	1049000	1125000\n\
    20040305	1150000	1130000\n\
    20150313	1099000	1135000\n\
    20150429	1088000	1145000\n\
    20140909	1199000	1150000\n\
    20171212	1098000	1155000\n\
    20150224	1149000	1175000\n\
    20171031	1150000	1175000\n\
    20070427	1200000	1200000\n\
    20070604	1200000	1200000\n\
    20151007	1149000	1200000\n\
    20160222	1225000	1230000\n\
    20180522	1199000	1240000\n\
    20130305	1295000	1295000\n\
    20150428	1365000	1440000\n\
    20140829	1200000	1450000\n\
    20061117	1500000	1500000\n\
    20150522	1799000	1770000\n\
    20161101	2050000	2050000\n";
    var margin = {
        top: 20,
        right: 80,
        bottom: 30,
        left: 50
      },
      width = 900 - margin.left - margin.right,
      height = 500 - margin.top - margin.bottom;
    var parseDate = d3.time.format("%Y%m%d").parse;
    var x = d3.time.scale()
      .range([0, width]);
    var y = d3.scale.linear()
      .range([height, 0]);
    var color = d3.scale.category10();
    var xAxis = d3.svg.axis()
      .scale(x)
      .orient("bottom");
    var yAxis = d3.svg.axis()
      .scale(y)
      .orient("left");
    var line = d3.svg.line()
      .interpolate("basis")
      .x(function(d) {
        return x(d.date);
      })
      .y(function(d) {
        return y(d.temperature);
      });
    var svg = d3.select("body").append("svg")
      .attr("width", width + margin.left + margin.right)
      .attr("height", height + margin.top + margin.bottom)
      .append("g")
      .attr("transform", "translate(" + margin.left + "," + margin.top + ")");
    var data = d3.tsv.parse(myData);
    color.domain(d3.keys(data[0]).filter(function(key) {
      return key !== "date";
    }));
    data.forEach(function(d) {
      d.date = parseDate(d.date);
    });
    var cities = color.domain().map(function(name) {
      return {
        name: name,
        values: data.map(function(d) {
          return {
            date: d.date,
            temperature: +d[name]
          };
        })
      };
    });
    x.domain(d3.extent(data, function(d) {
      return d.date;
    }));
    y.domain([
      d3.min(cities, function(c) {
        return d3.min(c.values, function(v) {
          return v.temperature;
        });
      }),
      d3.max(cities, function(c) {
        return d3.max(c.values, function(v) {
          return v.temperature;
        });
      })
    ]);
    var legend = svg.selectAll('g')
      .data(cities)
      .enter()
      .append('g')
      .attr('class', 'legend');
    legend.append('rect')
      .attr('x', width - 20)
      .attr('y', function(d, i) {
        return i * 20;
      })
      .attr('width', 10)
      .attr('height', 10)
      .style('fill', function(d) {
        return color(d.name);
      });
    legend.append('text')
      .attr('x', width - 8)
      .attr('y', function(d, i) {
        return (i * 20) + 9;
      })
      .text(function(d) {
        return d.name;
      });
    svg.append("g")
      .attr("class", "x axis")
      .attr("transform", "translate(0," + height + ")")
      .call(xAxis);
    svg.append("g")
      .attr("class", "y axis")
      .call(yAxis)
      .append("text")
      .attr("transform", "rotate(-90)")
      .attr("y", 6)
      .attr("dy", ".71em")
      .style("text-anchor", "end")
      .text("Temperature (ÂºF)");
    var city = svg.selectAll(".city")
      .data(cities)
      .enter().append("g")
      .attr("class", "city");
    city.append("path")
      .attr("class", "line")
      .attr("d", function(d) {
        return line(d.values);
      })
      .style("stroke", function(d) {
        return color(d.name);
      });
    city.append("text")
      .datum(function(d) {
        return {
          name: d.name,
          value: d.values[d.values.length - 1]
        };
      })
      .attr("transform", function(d) {
        return "translate(" + x(d.value.date) + "," + y(d.value.temperature) + ")";
      })
      .attr("x", 3)
      .attr("dy", ".35em")
      .text(function(d) {
        return d.name;
      });
    var mouseG = svg.append("g")
      .attr("class", "mouse-over-effects");
    mouseG.append("path") // this is the black vertical line to follow mouse
      .attr("class", "mouse-line")
      .style("stroke", "black")
      .style("stroke-width", "1px")
      .style("opacity", "0");

    var lines = document.getElementsByClassName('line');
    var mousePerLine = mouseG.selectAll('.mouse-per-line')
      .data(cities)
      .enter()
      .append("g")
      .attr("class", "mouse-per-line");
    mousePerLine.append("circle")
      .attr("r", 7)
      .style("stroke", function(d) {
        return color(d.name);
      })
      .style("fill", "none")
      .style("stroke-width", "1px")
      .style("opacity", "0");
    mousePerLine.append("text")
      .attr("transform", "translate(10,3)");
    mouseG.append('svg:rect') // append a rect to catch mouse movements on canvas
      .attr('width', width) // can't catch mouse events on a g element
      .attr('height', height)
      .attr('fill', 'none')
      .attr('pointer-events', 'all')
      .on('mouseout', function() { // on mouse out hide line, circles and text
        d3.select(".mouse-line")
          .style("opacity", "0");
        d3.selectAll(".mouse-per-line circle")
          .style("opacity", "0");
        d3.selectAll(".mouse-per-line text")
          .style("opacity", "0");
      })
      .on('mouseover', function() { // on mouse in show line, circles and text
        d3.select(".mouse-line")
          .style("opacity", "1");
        d3.selectAll(".mouse-per-line circle")
          .style("opacity", "1");
        d3.selectAll(".mouse-per-line text")
          .style("opacity", "1");
      })
      .on('mousemove', function() { // mouse moving over canvas
        var mouse = d3.mouse(this);
        d3.select(".mouse-line")
          .attr("d", function() {
            var d = "M" + mouse[0] + "," + height;
            d += " " + mouse[0] + "," + 0;
            return d;
          });
        d3.selectAll(".mouse-per-line")
          .attr("transform", function(d, i) {
            console.log(width/mouse[0])
            console.log(i)
            var xDate = x.invert(mouse[0]),
                bisect = d3.bisector(function(d) { return d.date; }).right;
                idx = bisect(d.values, xDate);

            var beginning = 0,
                end = lines[i].getTotalLength(),
                target = null;
          	console.log(lines[i]);
            while (true){
              target = Math.floor((beginning + end) / 2);
              pos = lines[i].getPointAtLength(target);
              if ((target === end || target === beginning) && pos.x !== mouse[0]) {
                  break;
              }
              if (pos.x > mouse[0])      end = target;
              else if (pos.x < mouse[0]) beginning = target;
              else break; //position found
            }

            d3.select(this).select('text')
              .text(y.invert(pos.y).toFixed(2));

            return "translate(" + mouse[0] + "," + pos.y +")";
          });
      });

  </script>
</body>

</html>
